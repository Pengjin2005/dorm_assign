# 新生宿舍分配算法最终报告

这是一个可行的(大概)NJU2024级新生的宿舍分配算法捏

## 技术方案

考虑到许多客观原因，调查问卷最后采取了对2023年问卷进行微调的方案。我将问卷题目分为

- 生活作息
- 宿舍环境
- 卫生习惯
- 宿舍氛围

这五个部分，每一部分的得分平方和正则化为50分以抵消不同题量对计算的影响，最后使用基于问卷排序题目计算的对应权重来得到数据点之间的欧氏距离。

每一部分的加权距离平方和如下

$$
d_i^2 = Q_i \cdot \dfrac{50}{m} \cdot \sum_k (x_k - y_k)^2
$$

其中$Q_i$ 是基于排序计算得到的权重，$x_k$、$y_k$分别是两个数据点在对应项目上的得分，$m$是该部分的题目总数。

为了应对可能出现的部分同学调换宿舍而不参与宿舍分配的情况发生，我计划将所有数据列成一个序列，尽量使得在这个序列中每一个数据点与其周围某个范围内数据点之间的数据距离按照序列距离作为权重计算的加权和最小。

在这种情况下，我预计即使任意删去若干个人之后，相邻的四个数据之间也能拥有较小的距离。从而便于后续调整。

## 具体实现

### 表格读写

我使用 `pandas`读取表格并转化为2维数组。

### 使用模拟退火进行排序

1. 初始化

   使用任意一个随机初始序列并设定初始温度$T$和冷却率$\alpha$
2. 计算成本函数

   $$
   Cost = \sum_p \sum_{q \neq p} \text{dist}(p, q) \cdot \frac{1}{|p - q|}
   $$
3. 模拟退火过程

   随机生成一个新的候选序列并计算新序列的成本。

   依据Metropolis准则确定是否接受新序列。

   降低温度。
